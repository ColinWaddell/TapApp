<ion-view id="page3" class=" " hide-nav-bar="true">
    <!-- Loading -->
    <div ng-if="!error && !weather">
      <ion-content padding="true" class="has-header">
        <ion-refresher
          pulling-text="Pull to refresh..."
          on-refresh="doRefresh()">
        </ion-refresher>
        <h1>LOADING</h1>
      </ion-content>
    </div>

    <!-- Weather View -->
    <div ng-if="!error && weather">
      <ion-content padding="true" class="has-header">
          <ion-refresher
            pulling-text="Pull to refresh..."
            on-refresh="doRefresh()">
          </ion-refresher>
          <div class="card">
            <div class="item item-divider" >
              <h2 class="taps-title">{{weather.location}}, the weather is</h2>
            </div>
            <div class="item item-text-wrap">
              <p class="taps-message">taps
                <span ng-class="weather.taps==='aff'?'taps-aff':'taps-oan'">{{!weather.error ? weather.taps : weather.error}}</span>
                <h3 class="taps-submessage" ng-if="weather.message">{{weather.message}}</h3>
              </p>
            </div>
            <div class="item item-divider">
              <p><strong>Current Weather: </strong>{{weather.description}}</p>
              <p><strong>Feels like:</strong> {{weather.temp_c}}&deg;C ({{weather.temp_f}}&deg;F)</p>
            </div>
          </div>

        <div class="taps-forecase">
          <ion-scroll zooming="false" direction="x">
            <div ng-style="{'width' : forecastWidth}">
              <div class="row">
                <div class="col w_box" ng-repeat="(n, day) in weather.forecast | limitTo:7" ng-hide="$first">
                  <div class="card" ng-controller="forecastIcon" on-hold="forecastToggleIconHold(t)" on-release="forecastToggleIconRelease()">
                    <div class="item item-divider">
                      <h4 class="w_day">
                        {{day.datetime | date:'EEEE'}}
                      </h4>
                    </div>
                    <div class="item item-text-wrap">
                      <div class="row">
                        <div class="col col-67">
                          <div ng-hide="toggled">
                            <img class="w_clothing"
                              ng-src="{{
                                day.taps==='aff' ? 'img/symbols/clothing/tapsaff.svg' :
                                weatherToClothingSVG(day.code, day.temp_high_c)
                              }}"></img>
                          </div>
                          <div ng-hide="!toggled">
                            <img class="w_clothing"
                              ng-src="{{weatherToIconSVG(day.code)}}"></img>
                          </div>
                        </div>
                        <div class="col col-33">
                          <p class="w_temp w_temp_high w_temp_padding">{{day.temp_high_c}}</p>
                          <p class="w_temp w_temp_low">{{day.temp_low_c}}</p>
                        </div>
                    </div>
                    </div>
                    <div class="item item-divider">
                      <h4 class="w_description">{{
                        day.taps==='aff' ? 'Taps Aff!' :
                        weather.description
                      }}</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
           </ion-scroll>
        </div>

        <ion-list>
          <ion-checkbox ng-change="toggleFavorite()" ng-model="favorite">
            <i class="icon placeholder-icon"
               ng-class="favorite ? 'ion-ios-star' : 'ion-ios-star-outline'">
            </i>
            {{favorite ? 'Saved' : 'Save to favorites'}}
          </ion-checkbox>
          <ion-checkbox on-click="addFavorite()" ng-if="favorite">
            <i class="icon placeholder-icon"
               ng-class="settings.notify ? 'ion-android-notifications' : 'ion-android-notifications-off'">
            </i>
            {{notify ? 'Notifications Enabled' : 'Notifications Disabled'}}
          </ion-checkbox>
        </ion-list>

      </ion-content>
    </div>

    <!-- Error -->
    <div ng-if="error && !weather">
      <ion-content padding="true" class="has-header">
        <ion-refresher
          pulling-text="Pull to refresh..."
          on-refresh="doRefresh()">
        </ion-refresher>
        <h1>Something went wrong</h1>
        <h2>Swipe the page doon to refresh <i class="icon ion-ios-arrow-down"></i></h2>
      </ion-content>
    </div>


</ion-view>
